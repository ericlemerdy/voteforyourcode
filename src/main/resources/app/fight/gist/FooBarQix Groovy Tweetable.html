<div id="gist1390934" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table cellpadding="0" cellspacing="0" class="lines highlight">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-foobarqix-groovy-L1" rel="file-foobarqix-groovy-L1">1</span>
          <span class="line-number" id="file-foobarqix-groovy-L2" rel="file-foobarqix-groovy-L2">2</span>
          <span class="line-number" id="file-foobarqix-groovy-L3" rel="file-foobarqix-groovy-L3">3</span>
          <span class="line-number" id="file-foobarqix-groovy-L4" rel="file-foobarqix-groovy-L4">4</span>
          <span class="line-number" id="file-foobarqix-groovy-L5" rel="file-foobarqix-groovy-L5">5</span>
          <span class="line-number" id="file-foobarqix-groovy-L6" rel="file-foobarqix-groovy-L6">6</span>
          <span class="line-number" id="file-foobarqix-groovy-L7" rel="file-foobarqix-groovy-L7">7</span>
          <span class="line-number" id="file-foobarqix-groovy-L8" rel="file-foobarqix-groovy-L8">8</span>
          <span class="line-number" id="file-foobarqix-groovy-L9" rel="file-foobarqix-groovy-L9">9</span>
          <span class="line-number" id="file-foobarqix-groovy-L10" rel="file-foobarqix-groovy-L10">10</span>
          <span class="line-number" id="file-foobarqix-groovy-L11" rel="file-foobarqix-groovy-L11">11</span>
          <span class="line-number" id="file-foobarqix-groovy-L12" rel="file-foobarqix-groovy-L12">12</span>
          <span class="line-number" id="file-foobarqix-groovy-L13" rel="file-foobarqix-groovy-L13">13</span>
          <span class="line-number" id="file-foobarqix-groovy-L14" rel="file-foobarqix-groovy-L14">14</span>
          <span class="line-number" id="file-foobarqix-groovy-L15" rel="file-foobarqix-groovy-L15">15</span>
          <span class="line-number" id="file-foobarqix-groovy-L16" rel="file-foobarqix-groovy-L16">16</span>
          <span class="line-number" id="file-foobarqix-groovy-L17" rel="file-foobarqix-groovy-L17">17</span>
          <span class="line-number" id="file-foobarqix-groovy-L18" rel="file-foobarqix-groovy-L18">18</span>
          <span class="line-number" id="file-foobarqix-groovy-L19" rel="file-foobarqix-groovy-L19">19</span>
          <span class="line-number" id="file-foobarqix-groovy-L20" rel="file-foobarqix-groovy-L20">20</span>
          <span class="line-number" id="file-foobarqix-groovy-L21" rel="file-foobarqix-groovy-L21">21</span>
          <span class="line-number" id="file-foobarqix-groovy-L22" rel="file-foobarqix-groovy-L22">22</span>
          <span class="line-number" id="file-foobarqix-groovy-L23" rel="file-foobarqix-groovy-L23">23</span>
          <span class="line-number" id="file-foobarqix-groovy-L24" rel="file-foobarqix-groovy-L24">24</span>
          <span class="line-number" id="file-foobarqix-groovy-L25" rel="file-foobarqix-groovy-L25">25</span>
          <span class="line-number" id="file-foobarqix-groovy-L26" rel="file-foobarqix-groovy-L26">26</span>
          <span class="line-number" id="file-foobarqix-groovy-L27" rel="file-foobarqix-groovy-L27">27</span>
          <span class="line-number" id="file-foobarqix-groovy-L28" rel="file-foobarqix-groovy-L28">28</span>
          <span class="line-number" id="file-foobarqix-groovy-L29" rel="file-foobarqix-groovy-L29">29</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-foobarqix-groovy-LC1"><span class="cm">/* Une implémentation Groovy "tweetable" de l'exercice: http://www.code-story.net/2011/11/16/foobarqix.html */</span></div><div class="line" id="file-foobarqix-groovy-LC2"><span class="cm">/* A coller directement </span></div><div class="line" id="file-foobarqix-groovy-LC3"><span class="cm">Le code Groovy ci-desous respecte la spécification donnée pour l'exercice, mais ajoute une contrainte de</span></div><div class="line" id="file-foobarqix-groovy-LC4"><span class="cm">plus: Tenir dans moins de 140 caractères (soit 137,pour être exact).</span></div><div class="line" id="file-foobarqix-groovy-LC5"><span class="cm">Il est certes cryptique, mais quelques astuces ou des formes concises du langage sont exploitées pour respecter </span></div><div class="line" id="file-foobarqix-groovy-LC6"><span class="cm">la contrainte:</span></div><div class="line" id="file-foobarqix-groovy-LC7"><span class="cm">    -Le "sum()" utilisé comme un "join()", pour "aplatir" des listes en chaines en éliminant les éléments vides au passage</span></div><div class="line" id="file-foobarqix-groovy-LC8"><span class="cm">    (ça fait un car. de moins !)</span></div><div class="line" id="file-foobarqix-groovy-LC9"><span class="cm">    -l'adressage des Map en convertissant directement un nombre en une clé de type string: j."$k" </span></div><div class="line" id="file-foobarqix-groovy-LC10"><span class="cm">    -le traitement des chaines comme collection de caractères: "$n".collect{...}</span></div><div class="line" id="file-foobarqix-groovy-LC11"><span class="cm">    -l'opérateur "Elvis" ?: ,qui retourne ce qui est à sa gauche si c'est non nul, ce qui est à sa droite sinon.</span></div><div class="line" id="file-foobarqix-groovy-LC12"><span class="cm">     Utilisé ici pour retourner le n entier, quand n n'est pas FooBarQixable (i.e:vide en sortie des transformations) </span></div><div class="line" id="file-foobarqix-groovy-LC13"><span class="cm">    -la réduction "inject", pour cumuler (dans w) les chaines correspondant aux </span></div><div class="line" id="file-foobarqix-groovy-LC14"><span class="cm">     multiples de 3,5 ou 7:  [3,5,7].inject(''){w,k-&gt;w+(n%k?'':j."$k")}</span></div><div class="line" id="file-foobarqix-groovy-LC15"><span class="cm">    -l'itérateur implicite "it": collect{j[it]?:''} pour trouver la correspondance de chaque chiffre avec Foo,bar et Qix</span></div><div class="line" id="file-foobarqix-groovy-LC16"><span class="cm">    -Quelques closures,envoyées en paramètre aux méthodes de collections: each,inject,collect</span></div><div class="line" id="file-foobarqix-groovy-LC17"><span class="cm">*/</span></div><div class="line" id="file-foobarqix-groovy-LC18"><span class="n">j</span><span class="o">=[</span><span class="s1">'3'</span><span class="o">:</span><span class="s1">'Foo'</span><span class="o">,</span><span class="s1">'5'</span><span class="o">:</span><span class="s1">'Bar'</span><span class="o">,</span><span class="s1">'7'</span><span class="o">:</span><span class="s1">'Qix'</span><span class="o">]</span></div><div class="line" id="file-foobarqix-groovy-LC19"><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="o">).</span><span class="na">each</span><span class="o">{</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">println</span><span class="o">([</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">7</span><span class="o">].</span><span class="na">inject</span><span class="o">(</span><span class="s1">''</span><span class="o">){</span><span class="n">w</span><span class="o">,</span><span class="n">k</span><span class="o">-&gt;</span><span class="n">w</span><span class="o">+(</span><span class="n">n</span><span class="o">%</span><span class="n">k</span><span class="o">?</span><span class="s1">''</span><span class="o">:</span><span class="n">j</span><span class="o">.</span><span class="s2">"$k"</span><span class="o">)}+</span><span class="s2">"$n"</span><span class="o">.</span><span class="na">collect</span><span class="o">{</span><span class="n">j</span><span class="o">[</span><span class="n">it</span><span class="o">]?:</span><span class="s1">''</span><span class="o">}.</span><span class="na">sum</span><span class="o">()?:</span><span class="n">n</span><span class="o">)}</span></div><div class="line" id="file-foobarqix-groovy-LC20">&nbsp;</div><div class="line" id="file-foobarqix-groovy-LC21">&nbsp;</div><div class="line" id="file-foobarqix-groovy-LC22"><span class="cm">/*</span></div><div class="line" id="file-foobarqix-groovy-LC23"><span class="cm">Une autre implémentation non moins cryptique, mais utilisant des collections (inject et collect), </span></div><div class="line" id="file-foobarqix-groovy-LC24"><span class="cm">jusqu'au moment où celles-ci sont agrégées en string puis retournées.</span></div><div class="line" id="file-foobarqix-groovy-LC25"><span class="cm">Cette version se prête mieux au test automatisé, car elle ne s'appuie pas sur les effets de bord (println)</span></div><div class="line" id="file-foobarqix-groovy-LC26"><span class="cm">Mais bon, elle fait 156 cars. :o((</span></div><div class="line" id="file-foobarqix-groovy-LC27"><span class="cm">*/</span></div><div class="line" id="file-foobarqix-groovy-LC28"><span class="n">j</span><span class="o">=[</span><span class="s1">'3'</span><span class="o">:</span><span class="s1">'Foo'</span><span class="o">,</span><span class="s1">'5'</span><span class="o">:</span><span class="s1">'Bar'</span><span class="o">,</span><span class="s1">'7'</span><span class="o">:</span><span class="s1">'Qix'</span><span class="o">]</span></div><div class="line" id="file-foobarqix-groovy-LC29"><span class="o">(</span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="o">).</span><span class="na">inject</span><span class="o">(</span><span class="s1">''</span><span class="o">){</span><span class="n">s</span><span class="o">,</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">s</span><span class="o">+(([</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">7</span><span class="o">].</span><span class="na">inject</span><span class="o">([]){</span><span class="n">l</span><span class="o">,</span><span class="n">k</span><span class="o">-&gt;</span><span class="n">l</span><span class="o">&lt;&lt;</span><span class="n">j</span><span class="o">.</span><span class="s2">"${n%k?0:k}"</span><span class="o">}+</span><span class="s2">"$n"</span><span class="o">.</span><span class="na">collect</span><span class="o">{</span><span class="n">j</span><span class="o">[</span><span class="n">it</span><span class="o">]}).</span><span class="na">grep</span><span class="o">{</span><span class="n">it</span><span class="o">}.</span><span class="na">sum</span><span class="o">()?:</span><span class="n">n</span><span class="o">)+</span><span class="s1">'\n'</span><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="/mfranck/1390934/raw/0a46b3a0d8da32b5c924d6f631a5702b8f467816/FooBarQix.groovy" style="float:right">view raw</a>
          <a href="https://gist.github.com/mfranck/1390934#file-foobarqix-groovy" style="float:right; margin-right:10px; color:#666;">FooBarQix.groovy</a>
          <a href="https://gist.github.com/mfranck/1390934">This Gist</a> brought to you by <a href="https://github.com">GitHub</a>.
        </div>
      </div>
</div>
