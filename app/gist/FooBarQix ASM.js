if ( 'prettyPrint' in window ) {} else {
    document.write( '<script type="text/javascript" src="http://gist-it.appspot.com/assets/prettify/prettify.js"></script>' );
}


document.write( '<link rel="stylesheet" href="http://gist-it.appspot.com/assets/embed.css"/>' );


document.write( '<link rel="stylesheet" href="http://gist-it.appspot.com/assets/prettify/prettify.css"/>' );

document.write( '<div class="gist-it-gist">\n<div class="gist-file">\n    <div class="gist-data">\n        \n        <pre class="prettyprint">; to compile :\n; \n; nasm -g -f macho foobarqix.asm\n; gcc -arch i386 -o foobarqix  methods.o foobarqix.o\n; \n; to debug :\n;\n; gdb foobarqix\n; set disassembly-flavor intel\n; break main\n; disassemble main\n; nexti\n; run\n; info stack\n\nsection .text\n\n; ------------------------------\n; OS X uses _ for symbol prefix\nextern _printf\nextern _sprintf\nextern _malloc\nextern _bzero\n\n; ------------------------------\n%define system_call\t\t0x80\n%define system_write\t0x4\n%define system_exit  \t0x1\n%define start_value \t1\n%define end_value \t\t10\n%define return_ok \t\t0\n%define foo_value \t\t3\n%define bar_value \t\t5\n%define qix_value \t\t7\n%define buffer_size \t32\n\n%macro printf 1\n\tsub \tesp, 3*4\n\tpush dword %1\n\tpush dword string_format\n\tcall _printf\n\tadd \tesp, 5*4\n%endmacro\n\n%macro is_divisible 1\n\txor     edx, edx\n\tmov \teax, ebx\n\tmov \tesi, %1\n\tidiv  \tesi\n%endmacro\n\nglobal _main\n\n; ------------------------------\n_main:\n \tpush\tebp\n    mov\t\tebp, esp\n    sub \tesp, 32\n    push \tebx\n    push\tesi\n    push\tedi\t\n\n; buffer = malloc(buffer_size) \n\tsub \tesp, 2*4 \n \tpush\tdword buffer_size\n\tcall\t_malloc\n\tadd \tesp, 2*4\n\ttest\teax, eax\n\tjz\t\tnear malloc_failed\n\tmov \t[buffer], eax\n\n; number = malloc(buffer_size) \n\tsub \tesp, 3*4\n \tpush\tdword buffer_size\n\tcall\t_malloc\n\tadd \tesp, 3*4\n\ttest\teax, eax\n\tjz\t\tnear malloc_failed\n\tmov \t[number], eax\n\n; for(ebx = start_value; ebx &lt; end_value; ebx ++) \n\tmov \tebx, start_value\nmain_loop:\n\t\n\n\t; sprintf(number, "%d", ebx);\n\tsub \tesp, 3*4\n \tpush\tdword 12\n \tpush\tdword digit_format\n \tpush\tdword number\n\tcall\t_sprintf\n\tadd \tesp, 3*4\n\n\tprintf number\n\t\ncontinue:\n\tcmp\t\tebx, end_value\n\tjz\t\tend\n\tinc\t\tebx\n\tjmp\t\tmain_loop \n\nend:\n\tpush    dword return_ok\n\tcall    exit\n\nmalloc_failed:\n\tprintf \tmalloc_failed_msg\n\tcall \texit\n\nexit:\n    mov \teax, system_exit\n    int \tsystem_call\n    ret\n\n\n; ------------------------------\nsection .data\n\n; printf\t\n\tnew_line\t\tdb  10, 0\n\tstring_format\tdb \'%s\', 10, 0\n\tdigit_print\t\tdb \'%d\',10, 0\n\tmessage\t\t\tdb \'FooBarQix\',10, 0\n; sprintf\n\tdigit_format\t\tdb \'%d\', 0\n\ttwo_digits_format\tdb \'%d%d\', 0\n; malloc\n\tmalloc_failed_msg\tdw \'malloc failed\', 10, 0\n\tbuffer\t\t\t\tdw 0  \n\tnumber\t\t\t\tdw 0  \n\t\n</pre>\n        \n    </div>\n    \n    <div class="gist-meta">\n        \n        <span><a href="https://github.com/framiere/FooBarQix/blob/master/src/main/asm/foobarqix.asm">This Gist</a> brought to you by <a href="http://gist-it.appspot.com">gist-it</a>.</span>\n        \n        <span style="float: right; color: #369;"><a href="https://github.com/framiere/FooBarQix/raw/master/src/main/asm/foobarqix.asm">view raw</a></span>\n        <span style="float: right; margin-right: 8px;">\n            <a style="color: rgb(102, 102, 102);" href="https://github.com/framiere/FooBarQix/blob/master/src/main/asm/foobarqix.asm">foobarqix.asm</a></span>\n            <!-- Generated by: http://gist-it.appspot.com -->\n    </div>\n    \n</div>\n</div>' );

document.write( '<script type="text/javascript">prettyPrint();</script>' );